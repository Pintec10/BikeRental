{\rtf1\ansi\ansicpg1252\deff0\nouicompat{\fonttbl{\f0\fnil\fcharset0 Calibri;}{\f1\fnil\fcharset0 Consolas;}{\f2\fnil Consolas;}{\f3\fnil\fcharset2 Symbol;}}
{\colortbl ;\red255\green0\blue0;\red51\green51\blue51;\red0\green77\blue187;}
{\*\generator Riched20 10.0.18362}\viewkind4\uc1 
\pard\sa200\sl276\slmult1\ul\b\f0\fs28\lang9 GENERAL DESCRIPTION\ulnone\b0\fs22\par

\pard\sl276\slmult1 This is a backend application for a bike rental store with two types of bikes (3 normal bikes and 2 mountain bikes). The rental price is 10\'80/day for normal bikes and 12\'80/day for mountain bikes. The application allows to:\par

\pard{\pntext\f3\'B7\tab}{\*\pn\pnlvlblt\pnf3\pnindent0{\pntxtb\'B7}}\fi-360\li720\sl276\slmult1 rent a bike from a specified date and for a specified number of days; payment is made upfront\par
{\pntext\f3\'B7\tab}return the bike and calculate the final cost. If a bike is returned late, a surcharge of 3\'80 is applied for each extra day if the bike is returned late.\par

\pard\sl276\slmult1 The app was designed with \b extensibility \b0 criteria in mind: if in the future additional features are required such as changing the amount of bikes, introducing new bike types or changing the prices, this could be done without extensive rewriting of existing code, but rather extending it.\par
\par
\ul\b\fs28 CLASSES\ulnone\b0\fs22\par
\b Bike, Customer\b0\par

\pard{\pntext\f3\'B7\tab}{\*\pn\pnlvlblt\pnf3\pnindent0{\pntxtb\'B7}}\fi-360\li720\sl276\slmult1 Other fields could be added such as e.g. identification document number etc.\par
{\pntext\f3\'B7\tab}The \cf1 bikeType\cf0  field is of String type; an enum would have been less error-prone, but more rigid towards addition of other bike types in the future. The front-end is advised to use select or radio button elements as input fields for this.\par
{\pntext\f3\'B7\tab}The \cf1 phoneNumber \cf0 field is a String, to allow the use of e.g. the '+' sign for international codes\par

\pard\sl276\slmult1\par
\b Rental\b0\par

\pard{\pntext\f3\'B7\tab}{\*\pn\pnlvlblt\pnf3\pnindent0{\pntxtb\'B7}}\fi-360\li720\sl276\slmult1 Has a ManyToOne relation with Bike and with Customer.\par
{\pntext\f3\'B7\tab}Contains all the time and cost information for each rental event. \par
{\pntext\f3\'B7\tab}Each instance stores also its daily costs for bike renting and late return; since in principle the price list might be changed in the future, this ensures that the correct prices are stored for each past rental event.\par

\pard\sl276\slmult1\par
\b PriceList\par

\pard{\pntext\f3\'B7\tab}{\*\pn\pnlvlblt\pnf3\pnindent0{\pntxtb\'B7}}\fi-360\li720\sl276\slmult1\b0 Contains all the price values for bike types and extra days; it is used as a reference table to determine costs when a new Rental instance is created.\par
{\pntext\f3\'B7\tab}Only a single persistent instance of this class exists, and it is initiated in the Command Line Runner\par
{\pntext\f3\'B7\tab}Compared to hard-coding the prices during the creation of a Rental instance, this solution allows more flexibility. If in the future endpoints are added to perform CRUD operations, the user could change prices or add bike types by him/herself without requiring modifications to the back-end code.\par

\pard\sl276\slmult1\par
\b RentalForm\par

\pard{\pntext\f3\'B7\tab}{\*\pn\pnlvlblt\pnf3\pnindent0{\pntxtb\'B7}}\fi-360\li720\sl276\slmult1\b0 This is a wrapper class used for the renting endpoint, since the required information to be placed in the body of the request contains elements from both the Bike and Customer classes. \par

\pard\sl276\slmult1\par
\b AppController\par

\pard{\pntext\f3\'B7\tab}{\*\pn\pnlvlblt\pnf3\pnindent0{\pntxtb\'B7}}\fi-360\li720\sl276\slmult1\b0 Contains the REST controller and its methods \par

\pard\sl276\slmult1\b\par
BikeRentalApplication\par

\pard{\pntext\f3\'B7\tab}{\*\pn\pnlvlblt\pnf3\pnindent0{\pntxtb\'B7}}\fi-360\li720\sl276\slmult1\b0 Contains the main method and the Command Line Runner\par
{\pntext\f3\'B7\tab}All existing Bike instances (3 normal, 2 mountain) and the single PriceList instance are initiated in the Command Line Runner; to make sure this happens only once, the code first checks that the corresponding repositories are empty.\par
{\pntext\f3\'B7\tab}There is also a testbed that is currently commented out\par

\pard\sl276\slmult1\par
\par
\ul\b\fs28 ENDPOINTS\ulnone\b0\fs22\par
\b Renting a bike (\cf2\b0\f1 /api/rent\cf0\b\f0 ), method: POST\b0\par

\pard{\pntext\f3\'B7\tab}{\*\pn\pnlvlblt\pnf3\pnindent0{\pntxtb\'B7}}\fi-360\li720\sl276\slmult1 The front end should send the following data as stringified JSON in the body of the request, using the same key names:\par

\pard\sl276\slmult1\tab\{\par
\tab  name: \cf3\i (name and surname of customer)\cf0\i0\par
\tab  email: \cf3\i (email of customer)\cf0\par
\i0\tab  phoneNumber: \cf3\i (phone number of customer)\cf0\i0\par
\tab  bikeType: \cf3\i (either 'normal' or 'mountain')\cf0\par
\i0\tab  startDate: \cf3\i (date in YYYY-MM-DD format)\cf0\i0\par
\tab  agreedDurationDays: \cf3\i (number of days agreed in advance for the rental)\cf0\i0\par
\tab\}\par

\pard{\pntext\f3\'B7\tab}{\*\pn\pnlvlblt\pnf3\pnindent0{\pntxtb\'B7}}\fi-360\li720\sl276\slmult1 checks if a bike of the requested type is available in the desired days \par
{\pntext\f3\'B7\tab}uses the customer email as unique identifier to determine if the customer is already in the database; otherwise it will create a new Customer instance\par
{\pntext\f3\'B7\tab}in the end returns also an \cf1 upfrontPayment\cf0  field which contains the price to be paid upfront for the requested bike type and rental duration \par

\pard\sl276\slmult1\par
\b Returning a bike \f1 (\cf2\b0 /api/return/\{rentalId\}\cf0\b\f0 ), method: POST\b0\par

\pard{\pntext\f3\'B7\tab}{\*\pn\pnlvlblt\pnf3\pnindent0{\pntxtb\'B7}}\fi-360\li720\sl276\slmult1 The front-end should provide the \cf1 rentalId \cf0 as a path variable. For practical reasons, the back-end should also expose a GET method returning a JSON with all the list of Rentals and related data (see below).\par
{\pntext\f3\'B7\tab}If having additional endpoints is not desired, an alternative approach is shown in a comment inside the AppController class. The idea is to provide a RentalForm object in the body of the request, using a JSON with keys named 'bikeId' and 'startDate' to unequivocally identify the corresponding Rental instance. \par

\pard\fi-710\li710\sl276\slmult1\tab The Id of the bike could be physically placed on the bike itself. This approach is obviously less recommended though.\par

\pard{\pntext\f3\'B7\tab}{\*\pn\pnlvlblt\pnf3\pnindent0{\pntxtb\'B7}}\fi-360\li720\sl276\slmult1 In the end, it returns a \cf1 finalCost\cf0  field which contains the total price including possible extra fees due to late return of the bike.\par
{\pntext\f3\'B7\tab}It is assumed that if a bike is returned earlier than the expected date, no discount or refund will be applied, and the \cf1 finalCost\cf0  is the same as the \cf1 upfrontPayment\cf0 .\par
{\pntext\f3\'B7\tab}Error messages are issued if:\par

\pard{\pntext\f3\'B7\tab}{\*\pn\pnlvlblt\pnf3\pnindent0{\pntxtb\'B7}}\fi-360\li1080\sl276\slmult1 the return event for the requested Rental has already been handled (\cf1 actualEndDate\cf0  has been set)\par
{\pntext\f3\'B7\tab}the return date (which is the day when the POST request is made) is before the starting rental date; i.e., cancelling a reservation cannot be done through this endpoint. One for deleting a rental has been included here (see below).\par

\pard\fi-710\li710\sl276\slmult1\par

\pard\sl276\slmult1\b Fetching a list of all rentals (\cf2\b0\f1 /api/rentals\cf0\b\f0 ), method: GET\b0\par

\pard{\pntext\f3\'B7\tab}{\*\pn\pnlvlblt\pnf3\pnindent0{\pntxtb\'B7}}\fi-360\li720\sl276\slmult1 This provides a convenient method for the front-end to retrieve \cf1 rentalId \cf0 values and display a database of all rentals\par

\pard\sl276\slmult1\par

\pard\box\brdrdash\brdrw0 \sl276\slmult1\b Deleting a single Rental (\cf2\b0\f1\lang2057 /api/\f2\lang9 rentals/\{rentalId\}/delete\cf0\b\f0 ), method: DELETE\b0\par

\pard{\pntext\f3\'B7\tab}{\*\pn\pnlvlblt\pnf3\pnindent0{\pntxtb\'B7}}\fi-360\li720\sl276\slmult1 This provides the possibility to delete asingle Rental instance from the database, e.g. if a reservation is cancelled. The \cf1 rentalId \cf0 must be provided as a path variable.\par

\pard\sl276\slmult1\par
\par
\par
}
 